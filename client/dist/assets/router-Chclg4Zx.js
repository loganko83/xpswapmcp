import{a as A,p as B}from"./vendor-C9R_Cz-L.js";import{r as o,R as F}from"./react-vendor-whffYpp3.js";const H=F.useInsertionEffect,M=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",N=M?o.useLayoutEffect:o.useEffect,V=H||N,L=e=>{const t=o.useRef([e,(...n)=>t[0](...n)]).current;return V(()=>{t[0]=e}),t[1]},T="popstate",y="pushState",E="replaceState",$="hashchange",w=[T,y,E,$],q=e=>{for(const t of w)addEventListener(t,e);return()=>{for(const t of w)removeEventListener(t,e)}},k=(e,t)=>A.useSyncExternalStore(q,e,t),z=()=>location.search,G=({ssrSearch:e=""}={})=>k(z,()=>e),R=()=>location.pathname,J=({ssrPath:e}={})=>k(R,e?()=>e:R),Q=(e,{replace:t=!1,state:n=null}={})=>history[t?E:y](n,"",e),W=(e={})=>[J(e),Q],b=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[b]>"u"){for(const e of[y,E]){const t=history[e];history[e]=function(){const n=t.apply(this,arguments),s=new Event(e);return s.arguments=arguments,dispatchEvent(s),n}}Object.defineProperty(window,b,{value:!0})}const X=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",S=(e="")=>e==="/"?"":e,Y=(e,t)=>e[0]==="~"?e.slice(1):S(t)+e,Z=(e="",t)=>X(x(S(e)),x(t)),x=e=>{try{return decodeURI(e)}catch{return e}},O={hook:W,searchHook:G,parser:B,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:e=>e},_=o.createContext(O),d=()=>o.useContext(_),j={},I=o.createContext(j),ee=()=>o.useContext(I),p=e=>{const[t,n]=e.hook(e);return[Z(e.base,t),L((s,c)=>n(Y(s,e.base),c))]},re=()=>p(d()),K=(e,t,n,s)=>{const{pattern:c,keys:i}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",s),u=c.exec(n)||[],[l,...f]=u;return l!==void 0?[!0,(()=>{const r=i!==!1?Object.fromEntries(i.map((m,P)=>[m,f[P]])):u.groups;let a={...f};return r&&Object.assign(a,r),a})(),...s?[l]:[]]:[!1,null]},te=({children:e,...t})=>{const n=d(),s=t.hook?O:n;let c=s;const[i,u]=t.ssrPath?.split("?")??[];u&&(t.ssrSearch=u,t.ssrPath=i),t.hrefs=t.hrefs??t.hook?.hrefs;let l=o.useRef({}),f=l.current,r=f;for(let a in s){const m=a==="base"?s[a]+(t[a]||""):t[a]||s[a];f===r&&m!==r[a]&&(l.current=r={...r}),r[a]=m,m!==s[a]&&(c=r)}return o.createElement(_.Provider,{value:c,children:e})},C=({children:e,component:t},n)=>t?o.createElement(t,{params:n}):typeof e=="function"?e(n):e,ne=e=>{let t=o.useRef(j),n=t.current;for(const s in e)e[s]!==n[s]&&(n=e);return Object.keys(e).length===0&&(n=e),t.current=n},ae=({path:e,nest:t,match:n,...s})=>{const c=d(),[i]=p(c),[u,l,f]=n??K(c.parser,e,i,t),r=ne({...ee(),...l});if(!u)return null;const a=f?o.createElement(te,{base:f},C(s,r)):C(s,r);return o.createElement(I.Provider,{value:r,children:a})},ce=o.forwardRef((e,t)=>{const n=d(),[s,c]=p(n),{to:i="",href:u=i,onClick:l,asChild:f,children:r,className:a,replace:m,state:P,...U}=e,g=L(h=>{h.ctrlKey||h.metaKey||h.altKey||h.shiftKey||h.button!==0||(l?.(h),h.defaultPrevented||(h.preventDefault(),c(u,e)))}),v=n.hrefs(u[0]==="~"?u.slice(1):n.base+u,n);return f&&o.isValidElement(r)?o.cloneElement(r,{onClick:g,href:v}):o.createElement("a",{...U,onClick:g,href:v,className:a?.call?a(s===u):a,children:r,ref:t})}),D=e=>Array.isArray(e)?e.flatMap(t=>D(t&&t.type===o.Fragment?t.props.children:t)):[e],ue=({children:e,location:t})=>{const n=d(),[s]=p(n);for(const c of D(e)){let i=0;if(o.isValidElement(c)&&(i=K(n.parser,c.props.path,t||s,c.props.nest))[0])return o.cloneElement(c,{match:i})}return null};export{ce as L,te as R,ue as S,ae as a,re as u};
