import{r as n,j as e,B as M,A as R,y as $,ag as q}from"./react-vendor-whffYpp3.js";import{u as V,b as _,C as X,d as b,e as w,o as H,c as C,B as F,f as K,A as Q,m as z,g as G}from"./index-BkmNh__t.js";import{I as N}from"./input-DXttkvsq.js";import{L as g}from"./label-D6jU-wGE.js";import{S as J}from"./separator-0tJUMahf.js";import{w as o}from"./web3-DuRBVa1D.js";import"./vendor-C9R_Cz-L.js";import"./utils-BkLtITBR.js";import"./router-Chclg4Zx.js";import"./ui-DDPZ4K8P.js";function re(){const{toast:m}=V(),[u,h]=n.useState(""),[A,p]=n.useState(""),[k,j]=n.useState(""),[i,d]=n.useState(!1),[B,y]=n.useState(!1),[P,v]=n.useState(""),[W,f]=n.useState("0"),{data:c}=_({queryKey:["xp-price"],queryFn:async()=>{const s=await fetch(G("/api/xp-price"));if(!s.ok)throw new Error("Failed to fetch XP price");return s.json()},refetchInterval:5e3}),x=1,S=c?.price||.016641808997191483,l=x/S;n.useEffect(()=>{D()},[]);const D=async()=>{try{const s=await o.isConnected();if(y(s),s){const t=await o.getWalletAddress(),a=await o.getXPBalance();v(t),f(a)}}catch(s){console.error("Error checking wallet connection:",s)}},I=async()=>{try{d(!0);const s=await o.connectWallet();if(s){v(s),y(!0);try{const t=await o.getXPBalance();f(t)}catch(t){console.error("Failed to load XP balance:",t),f("0")}m({title:"Wallet Connected",description:"MetaMask wallet successfully connected."})}}catch(s){console.error("Wallet connection failed:",s),m({title:"Connection Failed",description:"Failed to connect to MetaMask wallet.",variant:"destructive"})}finally{d(!1)}},U=s=>{h(s);const a=(parseFloat(s)||0)/l,r=a*x;p(a.toFixed(6)),j(r.toFixed(2))},E=s=>{p(s);const t=parseFloat(s)||0,a=t*l,r=t*x;h(a.toFixed(6)),j(r.toFixed(2))},T=s=>{j(s);const a=(parseFloat(s)||0)/x,r=a*l;p(a.toFixed(6)),h(r.toFixed(6))},L=async()=>{d(!0),setTimeout(()=>{d(!1),m({title:"Purchase Complete!",description:"XPS tokens have been successfully purchased."})},2e3)};return e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Buy XPS Tokens"}),e.jsx("p",{className:"text-muted-foreground",children:"Purchase utility tokens for the XpSwap ecosystem"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(X,{children:[e.jsxs(b,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-5 w-5"}),"Buy XPS Tokens"]}),e.jsx(H,{children:"Purchase XPS tokens with XP tokens"})]}),e.jsx(C,{className:"space-y-4",children:B?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-muted p-3 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Wallet Address:"}),e.jsxs("span",{className:"font-mono",children:[P.slice(0,6),"...",P.slice(-4)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"XP Balance:"}),e.jsxs("span",{className:"font-semibold",children:[parseFloat(W).toFixed(6)," XP"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"xp-amount",children:"XP Amount to Pay"}),e.jsx(N,{id:"xp-amount",type:"number",placeholder:"0.000000",value:u,onChange:s=>U(s.target.value)})]}),e.jsx("div",{className:"flex items-center justify-center py-2",children:e.jsx(R,{className:"h-4 w-4 text-muted-foreground"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"xps-amount",children:"XPS Amount to Receive"}),e.jsx(N,{id:"xps-amount",type:"number",placeholder:"0.000000",value:A,onChange:s=>E(s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"usd-amount",children:"USD Value"}),e.jsx(N,{id:"usd-amount",type:"number",placeholder:"0.00",value:k,onChange:s=>T(s.target.value)})]}),e.jsx(F,{onClick:L,className:"w-full",disabled:i||!u||parseFloat(u)<=0,children:i?"Processing...":"Buy XPS Tokens"})]}):e.jsx("div",{className:"text-center py-8",children:e.jsx(F,{onClick:I,className:"w-full",disabled:i,children:i?"Connecting...":"Connect Wallet"})})})]}),e.jsxs(X,{children:[e.jsx(b,{children:e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5"}),"Price Information"]})}),e.jsxs(C,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"$1.00"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"XPS Price"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",S.toFixed(6)]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"XP Price"})]})]}),e.jsx(J,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Exchange Rate:"}),e.jsxs("span",{className:"font-semibold",children:[l.toFixed(2)," XP = 1 XPS"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"24h Change:"}),e.jsxs(K,{variant:c?.change24h>=0?"default":"destructive",children:[c?.change24h>=0?"+":"",c?.change24h?.toFixed(2)||"0.00","%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"XP Market Cap:"}),e.jsxs("span",{className:"font-semibold",children:["$",c?.marketCap?.toLocaleString()||"N/A"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"24h Volume:"}),e.jsxs("span",{className:"font-semibold",children:["$",c?.volume24h?.toLocaleString()||"N/A"]})]})]})]})]})]}),e.jsxs(Q,{className:"mt-6",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsxs(z,{children:[e.jsx("strong",{children:"Important:"})," XPS token price is fixed at 1 XPS = 1 USD. Based on current XP price, approximately ",l.toFixed(2)," XP equals 1 XPS."]})]})]})}export{re as default};
