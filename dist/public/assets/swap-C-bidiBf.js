import{a as me,r as u,j as e}from"./react-B-ht5LAu.js";import{h as ns,b as R,i as ce,D as Se,j as Fe,k as Te,l as Ee,B as N,f as A,A as q,m as K,g as z,C as F,d as M,e as V,c as E,u as Ge,a as cs}from"./index-CunMlly4.js";import{T as xe,a as he,b as H,c as W}from"./tabs-BjtZ7Jla.js";import{I as re}from"./input-C7h7K1mu.js";import{S as pe}from"./scroll-area-CP_k00Us.js";import{g as Y,f as is}from"./tokenUtils-qSr8rCra.js";import{s as Xe,D as Qe}from"./web3-C8Lu7bQ_.js";import{a4 as os,R as Q,H as je,W as Me,T as le,E as ue,a5 as ds,k as Ve,n as ms,L as Re,l as xs,p as ne,a6 as Ie,a2 as te,a7 as fe,Z as ee,u as hs,Y as us,a8 as Ue,a9 as qe,z as gs,A as ae,I as ps,U as js}from"./utils-B8vuxRvf.js";import{W as fs}from"./WalletSelector-DokZcYQv.js";import{u as Ke}from"./useMutation-Di3yxqRf.js";import{u as Ye}from"./useTokenPrices-CJvB2e0C.js";import{S as bs}from"./separator-BNVQR2DL.js";import{S as be,a as Ne,b as we,c as ve,d as ye}from"./select-DQquyDyO.js";import{S as ke,l as ze}from"./lifiService-CuhfAat-.js";import"./vendor-CEoFgRlV.js";import"./router-QSY63kmV.js";import"./ui-CRT7ecel.js";function Ns(){const{wallet:i}=ns(),{data:r,isLoading:o,error:a}=R({queryKey:["/api/multichain/balance",i?.address],enabled:!!i?.address,refetchInterval:3e4}),{data:l,isLoading:x,error:m}=R({queryKey:["/api/multichain/transactions",i?.address],enabled:!!i?.address,refetchInterval:6e4}),t=me.useMemo(()=>{try{if(!r||typeof r!="object")return{};const n=r;return!n.balances||typeof n.balances!="object"?{}:Object.entries(n.balances).reduce((y,[g,j])=>(!j||typeof j!="object"||(y[g]=Object.entries(j).map(([f,I])=>({symbol:f,name:f,network:g,balance:I?.balance||"0",usdValue:I?.usdValue||0}))),y),{})}catch(n){return console.error("Error formatting balances:",n),{}}},[r]),w=me.useMemo(()=>{try{return r?.totalUsdValue||0}catch(n){return console.error("Error calculating total value:",n),0}},[r]),d=me.useMemo(()=>{try{if(!r||typeof r!="object")return{};const n=r;return!n.balances||typeof n.balances!="object"?{}:Object.entries(n.balances).reduce((y,[g,j])=>(!j||typeof j!="object"||(y[g]=Object.values(j).reduce((f,I)=>f+(I?.usdValue||0),0)),y),{})}catch(n){return console.error("Error calculating network totals:",n),{}}},[r]),v=me.useMemo(()=>{try{return Object.values(t).flat().sort((n,y)=>y.usdValue-n.usdValue).slice(0,10)}catch(n){return console.error("Error sorting top tokens:",n),[]}},[t]);return{balances:t,totalValue:w,networkTotals:d,topTokens:v,transactions:l?.transactions||[],isLoadingBalances:o,isLoadingTransactions:x,error:a||m,refetch:()=>{}}}function Ae(i){const{chainId:r}=ce(),{balances:o,isLoadingBalances:a,networkTotals:l,error:x}=Ns(),m=u.useMemo(()=>{switch(r){case 1:return"ethereum";case 56:return"bsc";case 20250217:return"xphere";default:return null}},[r]),t=u.useMemo(()=>{if(!m||!o[m])return{balance:"0",formattedBalance:"0",usdValue:0};const n=o[m].find(y=>y.symbol.toUpperCase()===i.toUpperCase());return{balance:n?.balance||"0",formattedBalance:n?.balance||"0",usdValue:n?.usdValue||0}},[m,o,i]),w=u.useMemo(()=>{const v={};return Object.entries(o).forEach(([n,y])=>{const g=y.find(j=>j.symbol.toUpperCase()===i.toUpperCase());g&&(v[n]={balance:g.balance,usdValue:g.usdValue})}),v},[o,i]),d=u.useMemo(()=>Object.values(w).reduce((v,{usdValue:n})=>v+n,0),[w]);return{balance:t.formattedBalance,usdValue:t.usdValue,isLoading:a,error:x,network:m,allNetworkBalances:w,totalBalance:d,networkTotals:l}}function Ce({symbol:i}){const{wallet:r}=ce(),{balance:o,isLoading:a,error:l}=Ae(i);return r.isConnected?a?e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-medium animate-pulse",children:"..."}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Balance"})]}):l?e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-medium text-red-500",children:"Error"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Balance"})]}):e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-medium",children:is(o)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Balance"})]}):e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-medium text-muted-foreground",children:"--"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Balance"})]})}function He({isOpen:i,onClose:r,onSelectToken:o,selectedToken:a}){const[l,x]=u.useState(""),[m]=u.useState(["XP","XPS","XCR","XEF","ETH","BTC","USDT","BNB","USDC"]),[t,w]=u.useState(!1),[d,v]=u.useState("xphere"),[n,y]=u.useState(!1),{data:g,isLoading:j,error:f,refetch:I}=R({queryKey:["xphere-tokens"],queryFn:async()=>{console.log("ðŸ”¥ Fetching Xphere tokens...");const s=await fetch(z("api/xphere-tokens"));if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const k=await s.json();return console.log("âœ… Xphere tokens data:",k),k},refetchInterval:3e4}),{data:p,isLoading:B,error:b,refetch:$}=R({queryKey:["ethereum-tokens"],queryFn:async()=>{console.log("ðŸ”¥ Fetching Ethereum tokens...");const s=await fetch(z("api/ethereum-tokens"));if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const k=await s.json();return console.log("âœ… Ethereum tokens data:",k),k},refetchInterval:6e4,enabled:d==="ethereum"}),{data:U,isLoading:G,error:se,refetch:D}=R({queryKey:["bsc-tokens"],queryFn:async()=>{console.log("ðŸ”¥ Fetching BSC tokens...");const s=await fetch(z("api/bsc-tokens"));if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const k=await s.json();return console.log("âœ… BSC tokens data:",k),k},refetchInterval:6e4,enabled:d==="bsc"}),c=(()=>{switch(console.log("ðŸ” Getting tokens for tab:",d),console.log("ðŸ“Š Data states:",{xphere:{loading:j,error:f,dataLength:Array.isArray(g)?g.length:"Not array"},ethereum:{loading:B,error:b,dataLength:Array.isArray(p)?p.length:"Not array"},bsc:{loading:G,error:se,dataLength:Array.isArray(U)?U.length:"Not array"}}),d){case"ethereum":const s=Array.isArray(p)?p:[];return console.log("ðŸ“ Returning Ethereum tokens:",s),s;case"bsc":const k=Array.isArray(U)?U:[];return console.log("ðŸ“ Returning BSC tokens:",k),k;default:const O=Array.isArray(g)?g:[];return console.log("ðŸ“ Returning Xphere tokens:",O),O}})(),S=Array.isArray(c)?c.filter(s=>s.symbol.toLowerCase().includes(l.toLowerCase())||s.name.toLowerCase().includes(l.toLowerCase())):[],C=async s=>{const k=s.network||"Xphere";if(k!=="Xphere")try{await Xe(k==="Ethereum"?"0x1":k==="BSC"?"0x38":"0x1349489")}catch(O){console.error("Failed to switch network:",O),w(!0);return}o(s),r(),x("")},L=async s=>{if(v(s),!n){y(!0);try{let k="0x134fe69";s==="ethereum"&&(k="0x1"),s==="bsc"&&(k="0x38"),await Xe(k)}catch(k){console.error("Failed to switch network:",k)}finally{y(!1)}}};return e.jsxs(e.Fragment,{children:[e.jsx(Se,{open:i,onOpenChange:r,children:e.jsxs(Fe,{className:"sm:max-w-xl",children:[e.jsx(Te,{children:e.jsx(Ee,{children:"Select a token"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(os,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(re,{placeholder:"Search name or paste address",value:l,onChange:s=>x(s.target.value),className:"pl-10"})]}),l===""&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Popular tokens"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c.filter(s=>m.includes(s.symbol)).map(s=>e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>C(s),className:"h-auto p-2",disabled:a?.id===s.id,children:[e.jsx("img",{src:Y(s.symbol),alt:s.symbol,className:"w-4 h-4 mr-2 rounded-full object-cover",onError:k=>{const O=k.target;O.outerHTML=`<div class="w-4 h-4 mr-2 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-xs font-bold">${s.symbol.slice(0,1)}</div>`}}),s.symbol]},s.id))})]}),e.jsxs(xe,{value:d,onValueChange:L,className:"w-full",children:[e.jsxs(he,{className:"grid w-full grid-cols-3",children:[e.jsxs(H,{value:"xphere",className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-500"}),"Xphere"]}),e.jsxs(H,{value:"ethereum",className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-gray-700"}),"Ethereum"]}),e.jsxs(H,{value:"bsc",className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-yellow-500"}),"BSC"]})]}),e.jsxs(W,{value:"xphere",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Xphere Network Tokens"}),e.jsxs("div",{className:"flex items-center gap-2",children:[j&&e.jsx(Q,{className:"w-4 h-4 animate-spin"}),e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>I(),className:"h-6 w-6 p-0",children:e.jsx(Q,{className:"w-3 h-3"})})]})]}),e.jsx(pe,{className:"h-64",children:e.jsx("div",{className:"space-y-1",children:S.map(s=>e.jsxs(N,{variant:"ghost",className:"w-full justify-between p-3 h-auto",onClick:()=>C(s),disabled:a?.id===s.id,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center overflow-hidden bg-gray-100",children:e.jsx("img",{src:Y(s.symbol,s),alt:s.symbol,className:"w-8 h-8 rounded-full object-cover",onError:k=>{const X=k.target.parentElement;X&&(X.innerHTML=`<div class="w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-xs font-bold">${s.symbol.slice(0,2)}</div>`)}})}),e.jsxs("div",{className:"text-left flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:s.symbol}),e.jsx(A,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-700",children:"Xphere"})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.name})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[m.includes(s.symbol)&&e.jsx(je,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),e.jsx(Ce,{symbol:s.symbol})]})]},s.id))})})]}),e.jsxs(W,{value:"ethereum",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Ethereum Network Tokens"}),e.jsxs("div",{className:"flex items-center gap-2",children:[B&&e.jsx(Q,{className:"w-4 h-4 animate-spin"}),e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>$(),className:"h-6 w-6 p-0",children:e.jsx(Q,{className:"w-3 h-3"})}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>L("ethereum"),className:"text-xs",disabled:n,children:[e.jsx(Me,{className:"w-3 h-3 mr-1"}),n?"Switching...":"Switch Network"]})]})]}),e.jsx(pe,{className:"h-64",children:e.jsx("div",{className:"space-y-1",children:S.map(s=>e.jsxs(N,{variant:"ghost",className:"w-full justify-between p-3 h-auto",onClick:()=>C(s),disabled:a?.id===s.id,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center overflow-hidden bg-gray-100",children:e.jsx("img",{src:s.iconUrl||Y(s.symbol,s),alt:s.symbol,className:"w-8 h-8 rounded-full object-cover",onError:k=>{const X=k.target.parentElement;X&&(X.innerHTML=`<div class="w-8 h-8 rounded-full bg-gradient-to-br from-gray-500 to-gray-700 flex items-center justify-center text-white text-xs font-bold">${s.symbol.slice(0,2)}</div>`)}})}),e.jsxs("div",{className:"text-left flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:s.symbol}),e.jsx(A,{variant:"outline",className:"text-xs border-gray-300 text-gray-600",children:"Ethereum"})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.name}),s.price&&e.jsxs("div",{className:"text-xs text-green-600",children:["$",s.price.toFixed(4)]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[m.includes(s.symbol)&&e.jsx(je,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),e.jsx(Ce,{symbol:s.symbol})]})]},s.id))})})]}),e.jsxs(W,{value:"bsc",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium",children:"BSC Network Tokens"}),e.jsxs("div",{className:"flex items-center gap-2",children:[G&&e.jsx(Q,{className:"w-4 h-4 animate-spin"}),e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>D(),className:"h-6 w-6 p-0",children:e.jsx(Q,{className:"w-3 h-3"})}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>L("bsc"),className:"text-xs",disabled:n,children:[e.jsx(Me,{className:"w-3 h-3 mr-1"}),n?"Switching...":"Switch Network"]})]})]}),e.jsx(pe,{className:"h-64",children:e.jsx("div",{className:"space-y-1",children:S.map(s=>e.jsxs(N,{variant:"ghost",className:"w-full justify-between p-3 h-auto",onClick:()=>C(s),disabled:a?.id===s.id,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center overflow-hidden bg-gray-100",children:e.jsx("img",{src:s.iconUrl||Y(s.symbol,s),alt:s.symbol,className:"w-8 h-8 rounded-full object-cover",onError:k=>{const X=k.target.parentElement;X&&(X.innerHTML=`<div class="w-8 h-8 rounded-full bg-gradient-to-br from-gray-500 to-gray-700 flex items-center justify-center text-white text-xs font-bold">${s.symbol.slice(0,2)}</div>`)}})}),e.jsxs("div",{className:"text-left flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:s.symbol}),e.jsx(A,{variant:"outline",className:"text-xs border-yellow-300 text-yellow-600",children:"BSC"})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.name}),s.price&&e.jsxs("div",{className:"text-xs text-green-600",children:["$",s.price.toFixed(4)]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[m.includes(s.symbol)&&e.jsx(je,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),e.jsx(Ce,{symbol:s.symbol})]})]},s.id))})})]})]})]})]})}),e.jsx(Se,{open:t,onOpenChange:w,children:e.jsxs(Fe,{className:"sm:max-w-md",children:[e.jsx(Te,{children:e.jsxs(Ee,{className:"flex items-center gap-2",children:[e.jsx(le,{className:"w-5 h-5 text-orange-500"}),"Cross-chain Token Detected"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(q,{className:"border-orange-200 bg-orange-50",children:[e.jsx(le,{className:"h-4 w-4 text-orange-600"}),e.jsx(K,{className:"text-orange-700",children:"This token is on a different blockchain network and cannot be directly swapped on Xphere. You'll need to use the Bridge function to transfer assets between networks."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{variant:"outline",onClick:()=>w(!1),className:"flex-1",children:"Cancel"}),e.jsxs(N,{onClick:()=>{w(!1),r(),window.location.href="/bridge"},className:"flex-1",children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),"Go to Bridge"]})]})]})]})})]})}function ws({fromToken:i,toToken:r,fromAmount:o,toAmount:a,fromTokenBalance:l,toTokenBalanceAmount:x,fromAmountUSD:m,toAmountUSD:t,pricesLoading:w,onFromAmountChange:d,onToAmountChange:v,onSwapTokens:n,onOpenFromSelector:y,onOpenToSelector:g,onOpenSettings:j,onMaxClick:f,walletConnected:I}){const p=u.useCallback(b=>{const $=b.target.value;d($)},[d]),B=u.useCallback(b=>{[46,8,9,27,13,110,190].indexOf(b.keyCode)!==-1||b.keyCode===65&&b.ctrlKey===!0||b.keyCode===67&&b.ctrlKey===!0||b.keyCode===86&&b.ctrlKey===!0||b.keyCode===88&&b.ctrlKey===!0||b.keyCode===90&&b.ctrlKey===!0||b.keyCode>=35&&b.keyCode<=40||(b.shiftKey||b.keyCode<48||b.keyCode>57)&&(b.keyCode<96||b.keyCode>105)&&b.preventDefault()},[]);return e.jsxs(F,{className:"w-full max-w-md mx-auto",children:[e.jsx(M,{children:e.jsxs(V,{className:"flex items-center justify-between",children:["Swap",e.jsx(N,{variant:"ghost",size:"sm",onClick:j,children:e.jsx(ds,{className:"h-4 w-4"})})]})}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"From"}),I&&e.jsxs("span",{className:"text-gray-500",children:["Balance: ",l," ",i.symbol]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(re,{type:"text",inputMode:"decimal",placeholder:"0.0",value:o,onChange:p,onKeyDown:B,className:"border-0 bg-transparent text-2xl font-medium p-0 h-auto focus-visible:ring-0",disabled:w,autoComplete:"off",spellCheck:"false"}),e.jsxs("div",{className:"flex items-center gap-2",children:[I&&parseFloat(l)>0&&e.jsx(N,{variant:"outline",size:"sm",onClick:f,className:"text-xs h-6 px-2",children:"MAX"}),e.jsxs(N,{variant:"outline",onClick:y,className:"flex items-center gap-2 h-10",children:[e.jsx("img",{src:Y(i.symbol),alt:i.name,className:"w-6 h-6 rounded-full",onError:b=>{const $=b.target;$.style.display="none"}}),e.jsx("span",{className:"font-medium",children:i.symbol}),e.jsx(Ve,{className:"h-4 w-4"})]})]})]}),o&&!isNaN(parseFloat(o))&&parseFloat(o)>0&&e.jsxs("div",{className:"text-sm text-gray-500",children:["â‰ˆ $",m]})]})]}),e.jsx("div",{className:"flex justify-center -my-2 relative z-10",children:e.jsx(N,{variant:"outline",size:"sm",onClick:n,className:"rounded-full w-10 h-10 p-0 bg-white border-2 border-gray-200 hover:border-blue-300 hover:bg-blue-50",children:e.jsx(ms,{className:"h-4 w-4"})})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"To"}),I&&e.jsxs("span",{className:"text-gray-500",children:["Balance: ",x," ",r.symbol]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(re,{type:"text",placeholder:"0.0",value:a,onChange:b=>v(b.target.value),className:"border-0 bg-transparent text-2xl font-medium p-0 h-auto focus-visible:ring-0",disabled:!0,readOnly:!0}),e.jsxs(N,{variant:"outline",onClick:g,className:"flex items-center gap-2 h-10",children:[e.jsx("img",{src:Y(r.symbol),alt:r.name,className:"w-6 h-6 rounded-full",onError:b=>{const $=b.target;$.style.display="none"}}),e.jsx("span",{className:"font-medium",children:r.symbol}),e.jsx(Ve,{className:"h-4 w-4"})]})]}),a&&!isNaN(parseFloat(a))&&parseFloat(a)>0&&e.jsxs("div",{className:"text-sm text-gray-500",children:["â‰ˆ $",t]})]})]})]})]})}function vs({isOpen:i,onClose:r,slippage:o,customSlippage:a,onSlippageChange:l,onCustomSlippageChange:x}){return e.jsx(Se,{open:i,onOpenChange:r,children:e.jsxs(Fe,{className:"sm:max-w-md",children:[e.jsx(Te,{children:e.jsx(Ee,{children:"Swap Settings"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-medium",children:"Slippage Tolerance"}),e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[[.1,.5,1].map(m=>e.jsxs(N,{variant:o===m?"default":"outline",size:"sm",onClick:()=>{l(m),x("")},children:[m,"%"]},m)),e.jsxs("div",{className:"relative",children:[e.jsx(re,{placeholder:"Custom",value:a,onChange:m=>{const t=m.target.value;x(t),t&&!isNaN(parseFloat(t))&&l(parseFloat(t))},className:"text-xs",type:"number",step:"0.1",min:"0.1",max:"50"}),a&&e.jsx("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-muted-foreground",children:"%"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Your transaction will revert if the price changes unfavorably by more than this percentage."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-medium",children:"Transaction Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Current Slippage:"}),e.jsxs("span",{className:"font-medium",children:[o,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Network:"}),e.jsx("span",{className:"font-medium",children:"Xphere"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Gas Fee:"}),e.jsx("span",{className:"font-medium",children:"~0.01 XP"})]})]})]})]})]})})}function ys({fromToken:i,toToken:r,fromAmount:o,swapQuote:a,walletConnected:l,isXphereNetwork:x,requiresCrossChainBridge:m,isInsufficientBalance:t,isGettingQuote:w,isSwapping:d,slippage:v,onConnectWallet:n,onSwitchNetwork:y,onExecuteSwap:g}){const j=a&&o?(parseFloat(a.toAmount)*(1-v/100)).toFixed(6):"0",f=a?.priceImpact||0;return e.jsxs("div",{className:"space-y-4",children:[a&&o&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Rate:"}),e.jsxs("span",{className:"font-medium",children:["1 ",i.symbol," = ",a.rate," ",r.symbol]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Price Impact:"}),e.jsxs("span",{className:`font-medium ${f>5?"text-red-600":f>1?"text-yellow-600":"text-green-600"}`,children:[f.toFixed(2),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Slippage Tolerance:"}),e.jsxs("span",{className:"font-medium",children:[v,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Minimum Received:"}),e.jsxs("span",{className:"font-medium",children:[j," ",r.symbol]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Network Fee:"}),e.jsxs("span",{className:"font-medium",children:["~",a.networkFee," XP"]})]})]}),a&&f>5&&e.jsxs(q,{className:"border-yellow-200 bg-yellow-50",children:[e.jsx(le,{className:"h-4 w-4 text-yellow-600"}),e.jsxs(K,{className:"text-yellow-800",children:["High price impact (",f.toFixed(2),"%). You may want to reduce your trade size."]})]}),m&&e.jsxs(q,{className:"border-blue-200 bg-blue-50",children:[e.jsx(ue,{className:"h-4 w-4 text-blue-600"}),e.jsx(K,{className:"text-blue-800",children:"This swap requires a cross-chain bridge. Please use the Bridge feature for cross-chain transfers."})]}),t&&e.jsxs(q,{className:"border-red-200 bg-red-50",children:[e.jsx(le,{className:"h-4 w-4 text-red-600"}),e.jsxs(K,{className:"text-red-800",children:["Insufficient ",i.symbol," balance. You need at least ",o," ",i.symbol,"."]})]}),e.jsx("div",{className:"pt-2",children:l?x?m?e.jsx(N,{className:"w-full",disabled:!0,children:"Use Bridge for Cross-chain Transfer"}):t?e.jsx(N,{className:"w-full",disabled:!0,children:"Insufficient Balance"}):!o||parseFloat(o)===0?e.jsx(N,{className:"w-full",disabled:!0,children:"Enter Amount"}):w?e.jsxs(N,{className:"w-full",disabled:!0,children:[e.jsx(Re,{className:"h-4 w-4 mr-2 animate-spin"}),"Getting Quote..."]}):d?e.jsxs(N,{className:"w-full",disabled:!0,children:[e.jsx(Re,{className:"h-4 w-4 mr-2 animate-spin"}),"Swapping..."]}):e.jsxs(N,{className:"w-full",onClick:g,disabled:!a,children:["Swap ",i.symbol," for ",r.symbol]}):e.jsx(N,{className:"w-full",onClick:y,variant:"outline",children:"Switch to Xphere Network"}):e.jsx(N,{className:"w-full",onClick:n,children:"Connect Wallet"})}),e.jsxs("div",{className:"text-center text-xs text-gray-500",children:["Trading on ",x?"Xphere":"Unknown"," Network"]})]})}function ks({fromToken:i,toToken:r,fromTokenPrice:o,toTokenPrice:a}){const{data:l}=R({queryKey:[`price-change/${i.symbol}/${r.symbol}`],refetchInterval:3e4}),{data:x}=R({queryKey:["market-stats"],queryFn:async()=>{try{const d=await fetch(z("/api/market-stats"));if(!d.ok)throw new Error("Failed to fetch market stats");return await d.json()}catch(d){return console.error("Error fetching market stats:",d),{volume24h:"0",totalValueLocked:"0",activePairs:0}}},refetchInterval:3e4}),m=l?.[i.symbol]?.change24h||0,t=l?.[r.symbol]?.change24h||0,w=o&&a?(o/a).toFixed(6):"0.000000";return e.jsxs(F,{className:"w-full max-w-md mx-auto mt-4",children:[e.jsx(M,{className:"pb-3",children:e.jsxs(V,{className:"flex items-center gap-2 text-lg",children:[e.jsx(xs,{className:"w-5 h-5"}),"Price Information"]})}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:i.symbol}),e.jsxs("div",{className:"flex items-center gap-1",children:[m>=0?e.jsx(ne,{className:"w-3 h-3 text-green-600"}):e.jsx(Ie,{className:"w-3 h-3 text-red-600"}),e.jsxs(A,{variant:m>=0?"default":"destructive",className:"text-xs",children:[m>=0?"+":"",m.toFixed(2),"%"]})]})]}),e.jsxs("div",{className:"text-lg font-bold text-gray-900",children:["$",o.toFixed(6)]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:r.symbol}),e.jsxs("div",{className:"flex items-center gap-1",children:[t>=0?e.jsx(ne,{className:"w-3 h-3 text-green-600"}):e.jsx(Ie,{className:"w-3 h-3 text-red-600"}),e.jsxs(A,{variant:t>=0?"default":"destructive",className:"text-xs",children:[t>=0?"+":"",t.toFixed(2),"%"]})]})]}),e.jsxs("div",{className:"text-lg font-bold text-gray-900",children:["$",a.toFixed(6)]})]})]}),e.jsx("div",{className:"bg-blue-50 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Exchange Rate"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-bold text-blue-900",children:["1 ",i.symbol," = ",w," ",r.symbol]}),e.jsx("div",{className:"text-xs text-blue-700",children:"Real-time rate"})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Market Statistics"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"24h Volume:"}),e.jsxs("span",{className:"font-medium",children:["$",x?.volume24h?parseFloat(x.volume24h).toLocaleString():"0"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"TVL:"}),e.jsxs("span",{className:"font-medium",children:["$",x?.totalValueLocked?parseFloat(x.totalValueLocked).toLocaleString():"0"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Active Pairs:"}),e.jsx("span",{className:"font-medium",children:x?.activePairs||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Fee Tier:"}),e.jsx("span",{className:"font-medium",children:"0.30%"})]})]})]}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-1 text-xs text-gray-500",children:[e.jsx(te,{className:"w-3 h-3"}),e.jsx("span",{children:"Prices update every 10 seconds"})]})})]})]})}function Cs({onTokenChange:i}={}){const{wallet:r,isXphereNetwork:o,switchToXphere:a,connectWallet:l}=ce(),{toast:x}=Ge(),m=cs(),[t,w]=u.useState({id:1,...Qe[0],isActive:!0}),[d,v]=u.useState({id:2,...Qe[1],isActive:!0}),[n,y]=u.useState(""),[g,j]=u.useState(""),[f,I]=u.useState(.5),[p,B]=u.useState(""),[b,$]=u.useState(!1),[U,G]=u.useState(!1),[se,D]=u.useState(!1),[ie,c]=u.useState(!1),[S,C]=u.useState(null),L=u.useRef(null),s=u.useRef(null),{data:k,isLoading:O}=Ye([t.symbol,d.symbol]),{balance:X}=Ae(t.symbol),{balance:_e}=Ae(d.symbol),ge=r.isConnected?parseFloat(X||"0").toFixed(4):"0.0000",Je=r.isConnected?parseFloat(_e||"0").toFixed(4):"0.0000";u.useEffect(()=>{r.isConnected||(y(""),j(""),C(null))},[r.isConnected]),u.useEffect(()=>{i?.(t,d,n)},[t.id,d.id,n,i]);const oe=Ke({mutationFn:async({amount:h,from:T,to:P,currentSlippage:_})=>{try{console.log("ðŸš€ Fetching swap quote...",{from:T,to:P,amount:h,slippage:_});const Z=await fetch(z("api/swap/quote"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({from:T,to:P,amount:h,slippage:_})}),de=await Z.json();if(!Z.ok)throw console.error("âŒ Quote API error:",de),new Error(de.error||"Failed to get swap quote");return console.log("âœ… Quote received:",de),de}catch(Z){throw console.error("âŒ Network error:",Z),Z}},onSuccess:h=>{console.log("ðŸ“Š Setting quote data:",h),C({inputAmount:h.inputAmount||"0",outputAmount:h.outputAmount||"0",priceImpact:h.priceImpact||0,minimumReceived:h.minimumReceived||"0",route:h.route||[],gasEstimate:h.gasEstimate||"0"}),j(h.outputAmount||"0")},onError:h=>{console.error("âŒ Quote error:",h),C(null),j("0"),!h.message.includes("Invalid amount")&&!h.message.includes("Same token")&&x({title:"ìŠ¤ì™‘ ê²¬ì  ì˜¤ë¥˜",description:h.message||"ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”",variant:"destructive"})}}),$e=Ke({mutationFn:async()=>{if(!S)throw new Error("No quote available");const h=await fetch(z("api/swap/execute"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({from:t.symbol,to:d.symbol,amount:n,slippage:f,userAddress:r.address})});if(!h.ok)throw new Error("Failed to execute swap");return h.json()},onSuccess:h=>{x({title:"Swap successful!",description:`Swapped ${n} ${t.symbol} for ${g} ${d.symbol}`}),y(""),j(""),C(null),m.invalidateQueries({queryKey:[`/api/blockchain/balance/${r.address}`]})},onError:h=>{console.error("Swap error:",h),x({title:"Swap failed",description:"Please try again later",variant:"destructive"})}}),J=u.useCallback((h,T,P,_)=>{if(L.current&&clearTimeout(L.current),!h||h==="0"||parseFloat(h)<=0){C(null),j("0");return}if(!T||!P||T===P){C(null),j("0");return}s.current&&s.current.from===T&&s.current.to===P&&s.current.amount===h&&!oe.isError||(L.current=setTimeout(()=>{s.current={from:T,to:P,amount:h},oe.mutate({amount:h,from:T,to:P,currentSlippage:_})},500))},[oe]),Pe=u.useCallback(h=>{if(h===""){y(""),j("0"),C(null),s.current=null;return}const T=h.replace(/[^0-9.]/g,""),P=T.split(".");P.length>2||P[1]&&P[1].length>8||(y(T),T&&parseFloat(T)>0&&t&&d&&t.symbol!==d.symbol?J(T,t.symbol,d.symbol,f):(j("0"),C(null)))},[t,d,f,J]);u.useEffect(()=>{n&&parseFloat(n)>0&&t&&d&&t.symbol!==d.symbol&&(s.current=null,J(n,t.symbol,d.symbol,f))},[f]),u.useEffect(()=>()=>{L.current&&clearTimeout(L.current)},[]);const Ze=()=>{const h=t.chainId===20250217,T=d.chainId===20250217,P=t.chainId!==20250217,_=d.chainId!==20250217;return h&&_||P&&T||P&&_},De=h=>{b?(h.id===d.id&&v(t),w(h),$(!1),C(null),j(""),s.current=null,n&&parseFloat(n)>0&&J(n,h.symbol,d.symbol,f)):U&&(h.id===t.id&&w(d),v(h),G(!1),C(null),j(""),s.current=null,n&&parseFloat(n)>0&&J(n,t.symbol,h.symbol,f))},es=()=>{const h=t,T=n;w(d),v(h),y(g),j(T),C(null),s.current=null,g&&parseFloat(g)>0&&J(g,d.symbol,h.symbol,f)},ss=()=>{const h=parseFloat(ge);if(h>0){const T=Math.max(0,h-.01).toString();Pe(T)}},Le=k?.[t.symbol]?.price||0,Oe=k?.[d.symbol]?.price||0,as=n?(parseFloat(n)*Le).toFixed(2):"0.00",ts=g?(parseFloat(g)*Oe).toFixed(2):"0.00",rs=n&&parseFloat(n)>parseFloat(ge),ls=Ze();return e.jsxs("div",{className:"space-y-6",children:[e.jsx(ws,{fromToken:t,toToken:d,fromAmount:n,toAmount:g,fromTokenBalance:ge,toTokenBalanceAmount:Je,fromAmountUSD:as,toAmountUSD:ts,pricesLoading:O,onFromAmountChange:Pe,onToAmountChange:j,onSwapTokens:es,onOpenFromSelector:()=>$(!0),onOpenToSelector:()=>G(!0),onOpenSettings:()=>D(!0),onMaxClick:ss,walletConnected:r.isConnected}),e.jsx(ys,{fromToken:t,toToken:d,fromAmount:n,swapQuote:S,walletConnected:r.isConnected,isXphereNetwork:o,requiresCrossChainBridge:ls,isInsufficientBalance:rs,isGettingQuote:oe.isPending,isSwapping:$e.isPending,slippage:f,onConnectWallet:()=>c(!0),onSwitchNetwork:a,onExecuteSwap:()=>$e.mutate()}),e.jsx(ks,{fromToken:t,toToken:d,fromTokenPrice:Le,toTokenPrice:Oe}),e.jsx(vs,{isOpen:se,onClose:()=>D(!1),slippage:f,customSlippage:p,onSlippageChange:I,onCustomSlippageChange:B}),e.jsx(He,{isOpen:b,onClose:()=>$(!1),onSelectToken:De,selectedToken:t}),e.jsx(He,{isOpen:U,onClose:()=>G(!1),onSelectToken:De,selectedToken:d}),e.jsx(fs,{isOpen:ie,onClose:()=>c(!1)})]})}const Be=[{name:"Uniswap V3",chainId:1,router:"0xE592427A0AEce92De3Edee1F18E0157C05861564",factory:"0x1F98431c8aD98523631AE4a59f267346ea31F984",logo:"https://app.uniswap.org/favicon.ico",enabled:!0},{name:"PancakeSwap V3",chainId:56,router:"0x13f4EA83D0bd40E75C8222255bc855a974568Dd4",factory:"0x0BFbCF9fa4f9C56B0F40a671Ad40E0805A091865",logo:"https://pancakeswap.finance/favicon.ico",enabled:!0},{name:"SushiSwap",chainId:1,router:"0xd9e1cE17f2641f24aE83637ab66a2cca9C378B9F",factory:"0xC0AEe478e3658e2610c5F7A4A2E1777cE9e4f2Ac",logo:"https://app.sushi.com/favicon.ico",enabled:!0}];class Ss{constructor(){this.dexes=Be.filter(r=>r.enabled)}async getAggregatedQuote(r,o,a,l){const x=Date.now(),m=this.dexes.filter(g=>g.chainId===l);if(m.length===0)throw new Error(`No supported DEXes found for chain ${l}`);const t=m.map(g=>this.getQuoteFromDEX(g,r,o,a)),w=await Promise.allSettled(t),d=[];if(w.forEach((g,j)=>{g.status==="fulfilled"&&g.value?d.push(g.value):console.warn(`Failed to get quote from ${m[j].name}:`,g)}),d.length===0)throw new Error("No valid quotes found from external DEXes");d.sort((g,j)=>parseFloat(j.amountOut)-parseFloat(g.amountOut));const v=d[0],n=d[1],y=n?((parseFloat(v.amountOut)-parseFloat(n.amountOut))/parseFloat(n.amountOut)*100).toFixed(2):"0";return{bestQuote:v,allQuotes:d,savings:`${y}%`,executionTime:Date.now()-x}}async getQuoteFromDEX(r,o,a,l){try{const x=await this.simulateExternalQuote(r,o,a,l);return{dex:r.name,amountOut:x.amountOut,priceImpact:x.priceImpact,gas:x.gas,route:[o,a],confidence:x.confidence}}catch(x){throw console.error(`Error getting quote from ${r.name}:`,x),x}}async simulateExternalQuote(r,o,a,l){await new Promise(n=>setTimeout(n,100+getSecureRandomInt(0,200)));const x=parseFloat(l);let m=1.85,t=.003;switch(r.name){case"Uniswap V3":m=1.87,t=5e-4;break;case"PancakeSwap V3":m=1.86,t=.0025;break;case"SushiSwap":m=1.84,t=.003;break}m*=.98+.04*getSecureRandom();const w=(x*m*(1-t)).toFixed(6),d=.5*getSecureRandom(),v=(21e3+getSecureRandomInt(0,1e5)).toFixed(0);return{amountOut:w,priceImpact:d,gas:v,confidence:85+getSecureRandomInt(0,10)}}getSupportedNetworks(){const r=this.dexes.map(o=>o.chainId);return Array.from(new Set(r))}getDEXesByChain(r){return this.dexes.filter(o=>o.chainId===r)}}const We=new Ss;function Fs({fromToken:i,toToken:r,fromAmount:o}){const{wallet:a}=ce(),[l,x]=u.useState(null),[m,t]=u.useState(!1),[w,d]=u.useState(null),[v,n]=u.useState(null),y=We.getSupportedNetworks(),g=a.chainId?y.includes(a.chainId):!1;u.useEffect(()=>{i&&r&&o&&parseFloat(o)>0&&g&&j()},[i,r,o,a.chainId,g]);const j=async()=>{if(!(!i||!r||!a.chainId)){t(!0),d(null);try{const p=await We.getAggregatedQuote(i.address,r.address,o,a.chainId);x(p),n(p.bestQuote.dex)}catch(p){d(p.message),x(null)}finally{t(!1)}}},f=p=>{switch(p){case 1:return"Ethereum";case 56:return"BSC";case 137:return"Polygon";case 20250217:return"Xphere";default:return`Chain ${p}`}},I=(p,B)=>{const b=parseFloat(p);return b<.001?`< 0.001 ${B}`:`${b.toLocaleString(void 0,{maximumFractionDigits:6})} ${B}`};return g?e.jsxs(F,{className:"border-purple-200 bg-gradient-to-br from-purple-50 to-blue-50",children:[e.jsx(M,{children:e.jsxs(V,{className:"flex items-center gap-2 text-purple-800",children:[e.jsx(ee,{className:"w-5 h-5"}),"DEX Aggregator",e.jsx(A,{variant:"secondary",className:"bg-purple-100 text-purple-700",children:"Best Price Guaranteed"})]})}),e.jsx(E,{className:"space-y-4",children:!i||!r||!o||parseFloat(o)===0?e.jsxs(q,{children:[e.jsx(fe,{className:"h-4 w-4"}),e.jsx(K,{children:"Configure your swap above to see aggregated quotes from multiple DEXes."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-1",children:[e.jsx(ne,{className:"w-4 h-4"}),"Best Rate"]}),m?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{className:"text-sm",children:"Finding best price..."})]}):l?e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-lg",children:I(l.bestQuote.amountOut,r.symbol)}),e.jsxs("div",{className:"text-sm text-green-600",children:["via ",l.bestQuote.dex]})]}):w?e.jsx("div",{className:"text-sm text-red-600",children:w}):null]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-1",children:[e.jsx(hs,{className:"w-4 h-4"}),"Savings"]}),l&&e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-lg text-green-600",children:l.savings}),e.jsx("div",{className:"text-sm text-gray-500",children:"vs 2nd best"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-1",children:[e.jsx(us,{className:"w-4 h-4"}),"Execution Time"]}),l&&e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-lg",children:[l.executionTime,"ms"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Quote time"})]})]})]}),l&&e.jsxs(xe,{value:v||l.bestQuote.dex,onValueChange:n,children:[e.jsx(he,{className:"grid w-full grid-cols-3",children:l.allQuotes.slice(0,3).map(p=>e.jsxs(H,{value:p.dex,className:"text-xs",children:[p.dex,p.dex===l.bestQuote.dex&&e.jsx(A,{variant:"secondary",className:"ml-1 text-xs bg-green-100 text-green-700",children:"Best"})]},p.dex))}),l.allQuotes.slice(0,3).map(p=>e.jsx(W,{value:p.dex,className:"space-y-3",children:e.jsxs("div",{className:"bg-white rounded-lg p-4 border",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:p.dex}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Network: ",f(Be.find(B=>B.name===p.dex)?.chainId||1)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-semibold text-lg",children:I(p.amountOut,r.symbol)}),e.jsx("div",{className:"text-sm text-gray-500",children:"Output Amount"})]})]}),e.jsx(bs,{className:"my-3"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Price Impact:"}),e.jsxs("span",{className:`ml-2 font-medium ${p.priceImpact>3?"text-red-600":p.priceImpact>1?"text-orange-600":"text-green-600"}`,children:[p.priceImpact.toFixed(2),"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Est. Gas:"}),e.jsx("span",{className:"ml-2 font-medium",children:parseInt(p.gas).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Confidence:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[p.confidence.toFixed(0),"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Route:"}),e.jsx("span",{className:"ml-2 font-medium",children:"Direct"})]})]}),e.jsxs(N,{className:"w-full mt-4",variant:p.dex===l.bestQuote.dex?"default":"outline",disabled:!a.isConnected,children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),"Swap via ",p.dex]})]})},p.dex))]}),e.jsxs(q,{className:"border-blue-200 bg-blue-50",children:[e.jsx(fe,{className:"h-4 w-4 text-blue-600"}),e.jsx(K,{className:"text-blue-700",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:"Cross-chain Aggregation Active"}),e.jsxs("p",{className:"text-sm",children:["Quotes from ",Be.filter(p=>p.chainId===a.chainId&&p.enabled).length," external DEXes on ",f(a.chainId||1)]})]})})]}),e.jsxs(N,{variant:"outline",onClick:j,disabled:m,className:"w-full",children:[e.jsx(Q,{className:`w-4 h-4 mr-2 ${m?"animate-spin":""}`}),m?"Updating Quotes...":"Refresh Quotes"]})]})})]}):e.jsx(F,{className:"border-orange-200 bg-orange-50",children:e.jsx(E,{className:"p-6",children:e.jsxs(q,{className:"border-orange-200 bg-orange-50",children:[e.jsx(fe,{className:"h-4 w-4 text-orange-600"}),e.jsx(K,{className:"text-orange-700",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:"External DEX aggregation is available on:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:y.map(p=>e.jsx(A,{variant:"outline",className:"text-orange-600 border-orange-300",children:f(p)},p))}),e.jsx("p",{className:"text-sm",children:"Switch to a supported network to access external liquidity."})]})})]})})})}function Ts(){const{wallet:i,switchToXphere:r}=ce();Ge();const[o,a]=u.useState(i.chainId||20250217),[l,x]=u.useState(1),[m,t]=u.useState(""),[w,d]=u.useState("ETH"),[v,n]=u.useState(null),[y,g]=u.useState(!1),[j,f]=u.useState(null),[I,p]=u.useState({}),B=[{chainId:20250217,name:"Xphere",symbol:"XP",logo:"https://s2.coinmarketcap.com/static/img/coins/64x64/36056.png",isConnected:i.chainId===20250217},{chainId:1,name:"Ethereum",symbol:"ETH",logo:"https://s2.coinmarketcap.com/static/img/coins/64x64/1027.png",isConnected:i.chainId===1},{chainId:56,name:"BNB Smart Chain",symbol:"BNB",logo:"https://s2.coinmarketcap.com/static/img/coins/64x64/1839.png",isConnected:i.chainId===56},{chainId:137,name:"Polygon",symbol:"MATIC",logo:"https://s2.coinmarketcap.com/static/img/coins/64x64/3890.png",isConnected:i.chainId===137},{chainId:42161,name:"Arbitrum",symbol:"ETH",logo:"https://s2.coinmarketcap.com/static/img/coins/64x64/11841.png",isConnected:i.chainId===42161}],b=["ETH","USDT","USDC","BNB","MATIC"];u.useEffect(()=>{(async()=>{try{await ze.initialize();const S=await $(1),C=await $(56),L=await $(137);p({ethereum:S,bsc:C,polygon:L})}catch(S){console.error("Failed to initialize multi-network service:",S)}})()},[]);const $=async c=>{const S=Object.values(ke).find(C=>C.chainId===c);if(!S||!S.rpcUrls||S.rpcUrls.length===0)return!1;try{const C=await fetch(S.rpcUrls[0],{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",method:"eth_blockNumber",params:[],id:1})});return!!((await C.json()).result&&C.ok)}catch(C){return console.error(`Network connectivity test failed for chain ${c}:`,C),!1}},U=async c=>{const S=Object.values(ke).find(C=>C.chainId===c);if(!(!S||!window.ethereum))try{await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:`0x${c.toString(16)}`,chainName:S.name,nativeCurrency:S.nativeCurrency,rpcUrls:S.rpcUrls,blockExplorerUrls:[S.blockExplorer]}]})}catch(C){console.error("Failed to add network:",C)}};u.useEffect(()=>{i.chainId&&i.chainId!==o&&a(i.chainId)},[i.chainId]);const G=async()=>{if(!m||parseFloat(m)<=0){f("Please enter a valid amount");return}if(o===l){f("Please select different networks for source and destination");return}g(!0),f(null);try{const c=await ze.getBestRoute(o,l,w,(parseFloat(m)*Math.pow(10,18)).toString());c?n(c):f("No bridge route found for this token pair")}catch(c){f(c.message||"Failed to get bridge quote")}finally{g(!1)}},se=async c=>{if(!i.isConnected){f("Please connect your wallet first");return}try{c===20250217?await r():await window.ethereum?.request({method:"wallet_switchEthereumChain",params:[{chainId:`0x${c.toString(16)}`}]})}catch(S){f(`Failed to switch network: ${S.message}`)}},D=c=>B.find(S=>S.chainId===c),ie=c=>c<60?`${c}s`:c<3600?`${Math.floor(c/60)}m`:`${Math.floor(c/3600)}h ${Math.floor(c%3600/60)}m`;return e.jsxs(F,{className:"border-green-200 bg-gradient-to-br from-green-50 to-blue-50",children:[e.jsxs(M,{children:[e.jsxs(V,{className:"flex items-center gap-2 text-green-800",children:[e.jsx(Ue,{className:"w-5 h-5"}),"Multi-Network Trading",e.jsx(A,{variant:"secondary",className:"bg-green-100 text-green-700",children:"Cross-Chain Enabled"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Trade assets across multiple blockchains with automatic bridging"})]}),e.jsxs(E,{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/60 p-4 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-green-800",children:"Network Status"}),e.jsxs(N,{size:"sm",variant:"outline",onClick:()=>window.location.reload(),className:"text-xs",children:[e.jsx(Q,{className:"w-3 h-3 mr-1"}),"Refresh"]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Object.entries(ke).map(([c,S])=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${I[c.toLowerCase()]?"bg-green-500":"bg-gray-400"}`}),e.jsx("span",{className:"text-xs font-medium",children:S.name})]}),!I[c.toLowerCase()]&&e.jsx(N,{size:"sm",variant:"ghost",onClick:()=>U(S.chainId),className:"text-xs p-1 h-6",children:e.jsx(qe,{className:"w-3 h-3"})})]},c))}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["ðŸŸ¢ Connected â€¢ âšª Disconnected â€¢ Click ",e.jsx(qe,{className:"w-3 h-3 inline"})," to add network to MetaMask"]})]}),e.jsxs(xe,{defaultValue:"swap",className:"w-full",children:[e.jsxs(he,{className:"grid w-full grid-cols-2",children:[e.jsx(H,{value:"swap",children:"Cross-Chain Swap"}),e.jsx(H,{value:"bridge",children:"Bridge Assets"})]}),e.jsxs(W,{value:"swap",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"From Network"}),e.jsxs(be,{value:o.toString(),onValueChange:c=>a(parseInt(c)),children:[e.jsx(Ne,{children:e.jsx(we,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:D(o)?.logo,alt:"",className:"w-5 h-5 rounded-full"}),D(o)?.name,D(o)?.isConnected&&e.jsx(A,{variant:"secondary",className:"text-xs bg-green-100 text-green-700",children:"Connected"})]})})}),e.jsx(ve,{children:B.map(c=>e.jsx(ye,{value:c.chainId.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:c.logo,alt:"",className:"w-5 h-5 rounded-full"}),c.name,c.isConnected&&e.jsx(A,{variant:"secondary",className:"text-xs bg-green-100 text-green-700",children:"Connected"})]})},c.chainId))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"To Network"}),e.jsxs(be,{value:l.toString(),onValueChange:c=>x(parseInt(c)),children:[e.jsx(Ne,{children:e.jsx(we,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:D(l)?.logo,alt:"",className:"w-5 h-5 rounded-full"}),D(l)?.name]})})}),e.jsx(ve,{children:B.filter(c=>c.chainId!==o).map(c=>e.jsx(ye,{value:c.chainId.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:c.logo,alt:"",className:"w-5 h-5 rounded-full"}),c.name]})},c.chainId))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Token"}),e.jsxs(be,{value:w,onValueChange:d,children:[e.jsx(Ne,{children:e.jsx(we,{})}),e.jsx(ve,{children:b.map(c=>e.jsx(ye,{value:c,children:c},c))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Amount"}),e.jsx(re,{type:"number",placeholder:"0.0",value:m,onChange:c=>t(c.target.value)})]})]}),e.jsx(N,{onClick:G,disabled:y||!i.isConnected,className:"w-full bg-green-600 hover:bg-green-700",children:y?e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"w-4 h-4 mr-2 animate-spin"}),"Getting Quote..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Get Cross-Chain Quote"]})}),j&&e.jsxs(q,{className:"border-red-200 bg-red-50",children:[e.jsx(le,{className:"h-4 w-4 text-red-600"}),e.jsx(K,{className:"text-red-700",children:j})]}),v&&e.jsxs(F,{className:"bg-white border-green-200",children:[e.jsx(M,{children:e.jsxs(V,{className:"text-lg flex items-center gap-2",children:[e.jsx(ee,{className:"w-5 h-5 text-green-600"}),"Bridge Quote"]})}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"You Send:"}),e.jsxs("div",{className:"font-medium",children:[parseFloat(v.fromAmount)/Math.pow(10,18)," ",w]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["on ",D(v.fromChain)?.name]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"You Receive:"}),e.jsxs("div",{className:"font-medium",children:[parseFloat(v.toAmount)/Math.pow(10,18)," ",w]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["on ",D(v.toChain)?.name]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Time:"}),e.jsx("div",{className:"font-medium",children:ie(v.estimatedTime)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Bridge Fee:"}),e.jsxs("div",{className:"font-medium",children:[parseFloat(v.bridgeFee)/Math.pow(10,18)," ",w]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Provider:"}),e.jsx("div",{className:"font-medium",children:v.provider})]})]}),e.jsxs(N,{className:"w-full bg-blue-600 hover:bg-blue-700",children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),"Execute Bridge Transaction"]})]})]})]}),e.jsxs(W,{value:"bridge",className:"space-y-4",children:[e.jsxs(q,{className:"border-blue-200 bg-blue-50",children:[e.jsx(Ue,{className:"h-4 w-4 text-blue-600"}),e.jsx(K,{className:"text-blue-700",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-medium",children:"Bridge Integration Status"}),e.jsx("p",{className:"text-sm",children:"LI.FI Bridge SDK integrated - supports 40+ blockchains including:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:B.map(c=>e.jsx(A,{variant:"outline",className:"text-xs",children:c.name},c.chainId))})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:B.map(c=>e.jsx(F,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:c.logo,alt:"",className:"w-8 h-8 rounded-full"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:c.name}),e.jsx("div",{className:"text-sm text-gray-500",children:c.symbol})]})]}),c.isConnected?e.jsx(A,{className:"bg-green-100 text-green-700",children:"Connected"}):e.jsx(N,{size:"sm",variant:"outline",onClick:()=>se(c.chainId),children:"Connect"})]})},c.chainId))})]})]})]})]})}function Es(){const{data:i=[]}=R({queryKey:["top-pairs"],queryFn:async()=>{try{const a=await fetch(z("/api/pools/pairs"));return a.ok?(await a.json()).slice(0,3):[]}catch(a){return console.error("Failed to fetch top pairs:",a),[]}},refetchInterval:3e4}),r=a=>{const l=parseFloat(a);return l>=1e6?`$${(l/1e6).toFixed(1)}M`:l>=1e3?`$${(l/1e3).toFixed(0)}K`:`$${l.toFixed(0)}`},o=a=>{const l=parseFloat(a);return l<1?`$${l.toFixed(4)}`:`$${l.toFixed(2)}`};return e.jsxs(F,{children:[e.jsx(M,{children:e.jsx(V,{children:"Top Pairs"})}),e.jsx(E,{children:e.jsx("div",{className:"space-y-4",children:i.length===0?e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No pairs available"}):i.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg hover:bg-muted/50 transition-colors cursor-pointer",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center -space-x-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-background overflow-hidden",children:e.jsx("img",{src:Y(a.tokenA.symbol),alt:a.tokenA.symbol,className:"w-full h-full object-cover",onError:l=>{const x=l.target;x.style.display="none"}})}),e.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-background overflow-hidden",children:e.jsx("img",{src:Y(a.tokenB.symbol),alt:a.tokenB.symbol,className:"w-full h-full object-cover",onError:l=>{const x=l.target;x.style.display="none"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold",children:[a.tokenA.symbol,"/",a.tokenB.symbol]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[r(a.volume24h)," Volume"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-semibold",children:o(a.price)}),e.jsxs("div",{className:"flex items-center space-x-1",children:[parseFloat(a.priceChange24h)>=0?e.jsx(ne,{className:"w-3 h-3 text-green-500"}):e.jsx(Ie,{className:"w-3 h-3 text-red-500"}),e.jsxs(A,{variant:"outline",className:parseFloat(a.priceChange24h)>=0?"text-green-600 border-green-200":"text-red-600 border-red-200",children:[parseFloat(a.priceChange24h)>=0?"+":"",a.priceChange24h,"%"]})]})]})]},a.id))})})]})}function Hs(){const{data:i}=Ye(),[r,o]=u.useState({fromToken:null,toToken:null,fromAmount:"0"}),{data:a}=R({queryKey:["market-stats"],queryFn:async()=>{const t=await fetch(z("api/market-stats"));if(!t.ok)throw new Error("Failed to fetch market stats");return t.json()},refetchInterval:3e4}),{data:l}=R({queryKey:["xp-price"],queryFn:async()=>{const t=await fetch(z("api/xp-price"));if(!t.ok)throw new Error("Failed to fetch XP price");return t.json()},refetchInterval:3e4}),x=t=>t>=1e9?`$${(t/1e9).toFixed(1)}B`:t>=1e6?`$${(t/1e6).toFixed(1)}M`:t>=1e3?`$${(t/1e3).toFixed(1)}K`:`$${t.toFixed(2)}`,m=t=>t<1?`$${t.toFixed(6)}`:`$${t.toFixed(2)}`;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-900 dark:to-blue-900/20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsx(F,{className:"bg-gradient-to-r from-purple-600 via-blue-600 to-cyan-600 text-white border-0",children:e.jsx(E,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",children:e.jsx(gs,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"text-xl font-bold mb-1",children:"XPS Native Token"}),e.jsx("p",{className:"text-blue-100 text-sm",children:"Up to 75% trading fee discount + Up to 75% staking APY"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(A,{variant:"secondary",className:"bg-white/20 text-white border-white/30",children:"Deflationary Token"}),e.jsxs(N,{variant:"secondary",className:"bg-white text-purple-600 hover:bg-white/90",onClick:()=>window.location.href="/documentation#xps-whitepaper",children:["View Whitepaper ",e.jsx(ae,{className:"w-4 h-4 ml-2"})]})]})]})})})}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-12",children:[e.jsx(F,{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105",children:e.jsxs(E,{className:"p-6 text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-14 h-14 bg-gradient-to-br from-green-400 to-green-600 rounded-full mx-auto mb-4",children:e.jsx(ps,{className:"w-7 h-7 text-white"})}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:a?.totalValueLocked?x(parseFloat(a.totalValueLocked)):"$0"}),e.jsx("div",{className:"text-sm text-muted-foreground font-medium",children:"Total Value Locked"})]})}),e.jsx(F,{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105",children:e.jsxs(E,{className:"p-6 text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-14 h-14 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full mx-auto mb-4",children:e.jsx(te,{className:"w-7 h-7 text-white"})}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:a?.volume24h?x(parseFloat(a.volume24h)):"$0"}),e.jsx("div",{className:"text-sm text-muted-foreground font-medium",children:"24h Volume"})]})}),e.jsx(F,{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105",children:e.jsxs(E,{className:"p-6 text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-14 h-14 bg-gradient-to-br from-purple-400 to-purple-600 rounded-full mx-auto mb-4",children:e.jsx(ee,{className:"w-7 h-7 text-white"})}),e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:a?.activePairs||0}),e.jsx("div",{className:"text-sm text-muted-foreground font-medium",children:"Active Pairs"})]})}),e.jsx(F,{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105",children:e.jsxs(E,{className:"p-6 text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-14 h-14 bg-gradient-to-br from-orange-400 to-orange-600 rounded-full mx-auto mb-4",children:e.jsx("img",{src:"https://s2.coinmarketcap.com/static/img/coins/64x64/36056.png",alt:"XP",className:"w-7 h-7 rounded-full"})}),e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:m(i?.XP?.price||l?.price||0)}),e.jsxs("div",{className:"text-sm text-muted-foreground font-medium flex items-center justify-center gap-2",children:["XP Price",e.jsxs(A,{variant:"outline",className:`text-xs ${(i?.XP?.change24h||l?.change24h||0)>=0?"text-green-600 border-green-200 bg-green-50":"text-red-600 border-red-200 bg-red-50"}`,children:[(i?.XP?.change24h||l?.change24h||0)>=0?"+":"",(i?.XP?.change24h||l?.change24h||0).toFixed(2),"%"]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-5 gap-8",children:[e.jsxs("div",{className:"xl:col-span-2",children:[e.jsxs(F,{className:"bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm border-0 shadow-2xl",children:[e.jsxs(M,{className:"pb-6 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-t-lg",children:[e.jsxs(V,{className:"text-2xl font-bold text-center flex items-center justify-center gap-2",children:[e.jsx(ee,{className:"w-6 h-6 text-blue-600"}),"Instant Token Swap"]}),e.jsx("p",{className:"text-center text-muted-foreground",children:"Trade tokens instantly with minimal slippage and competitive rates"})]}),e.jsx(E,{className:"p-6",children:e.jsx(Cs,{onTokenChange:(t,w,d)=>{o({fromToken:t,toToken:w,fromAmount:d})}})})]}),e.jsx("div",{className:"mt-6",children:e.jsx(Fs,{fromToken:r.fromToken,toToken:r.toToken,fromAmount:r.fromAmount})}),e.jsx("div",{className:"mt-6",children:e.jsx(Ts,{})})]}),e.jsx("div",{className:"xl:col-span-3 space-y-8",children:e.jsxs(xe,{defaultValue:"pairs",className:"w-full",children:[e.jsxs(he,{className:"grid w-full grid-cols-3 mb-6 bg-white/50 dark:bg-gray-800/50",children:[e.jsx(H,{value:"pairs",className:"data-[state=active]:bg-blue-100 dark:data-[state=active]:bg-blue-900/30",children:"Top Trading Pairs"}),e.jsx(H,{value:"features",className:"data-[state=active]:bg-green-100 dark:data-[state=active]:bg-green-900/30",children:"Platform Features"}),e.jsx(H,{value:"stats",className:"data-[state=active]:bg-purple-100 dark:data-[state=active]:bg-purple-900/30",children:"Live Statistics"})]}),e.jsx(W,{value:"pairs",className:"space-y-6",children:e.jsx(Es,{})}),e.jsx(W,{value:"features",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(F,{className:"bg-gradient-to-br from-blue-50 via-blue-50 to-blue-100 dark:from-blue-900/20 dark:via-blue-900/10 dark:to-blue-800/20 border-blue-200 dark:border-blue-800 hover:shadow-lg transition-all duration-300",children:e.jsxs(E,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center",children:e.jsx(ee,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100",children:"Lightning Swaps"})]}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mb-4",children:"Execute trades in seconds with minimal slippage, competitive fees, and seamless user experience across all devices."}),e.jsxs(N,{size:"sm",className:"w-full bg-blue-600 hover:bg-blue-700",onClick:()=>window.location.href="/swap",children:["Start Trading",e.jsx(ae,{className:"w-4 h-4 ml-2"})]})]})}),e.jsx(F,{className:"bg-gradient-to-br from-green-50 via-green-50 to-green-100 dark:from-green-900/20 dark:via-green-900/10 dark:to-green-800/20 border-green-200 dark:border-green-800 hover:shadow-lg transition-all duration-300",children:e.jsxs(E,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center",children:e.jsx(ne,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold text-green-900 dark:text-green-100",children:"Yield Farming"})]}),e.jsx("p",{className:"text-sm text-green-700 dark:text-green-300 mb-4",children:"Earn up to 75% APY by providing liquidity and staking LP tokens in our beta farming pools."}),e.jsxs(N,{size:"sm",className:"w-full bg-green-600 hover:bg-green-700",onClick:()=>window.location.href="/farm",children:["Explore Farms",e.jsx(ae,{className:"w-4 h-4 ml-2"})]})]})}),e.jsx(F,{className:"bg-gradient-to-br from-purple-50 via-purple-50 to-purple-100 dark:from-purple-900/20 dark:via-purple-900/10 dark:to-purple-800/20 border-purple-200 dark:border-purple-800 hover:shadow-lg transition-all duration-300",children:e.jsxs(E,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center",children:e.jsx(te,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold text-purple-900 dark:text-purple-100",children:"Cross-Chain Bridge"})]}),e.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-300 mb-4",children:"Bridge assets across 6+ networks with secure protocols and user-friendly interface."}),e.jsxs(N,{size:"sm",className:"w-full bg-purple-600 hover:bg-purple-700",onClick:()=>window.location.href="/bridge",children:["Bridge Assets",e.jsx(ae,{className:"w-4 h-4 ml-2"})]})]})}),e.jsx(F,{className:"bg-gradient-to-br from-orange-50 via-orange-50 to-orange-100 dark:from-orange-900/20 dark:via-orange-900/10 dark:to-orange-800/20 border-orange-200 dark:border-orange-800 hover:shadow-lg transition-all duration-300",children:e.jsxs(E,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl flex items-center justify-center",children:e.jsx(js,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold text-orange-900 dark:text-orange-100",children:"DAO Governance"})]}),e.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-300 mb-4",children:"Participate in protocol governance and earn rewards for active community involvement."}),e.jsxs(N,{size:"sm",className:"w-full bg-orange-600 hover:bg-orange-700",onClick:()=>window.location.href="/governance",children:["Join DAO",e.jsx(ae,{className:"w-4 h-4 ml-2"})]})]})})]})}),e.jsxs(W,{value:"stats",className:"space-y-6",children:[e.jsxs(F,{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm",children:[e.jsx(M,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(te,{className:"w-5 h-5 text-blue-600"}),"Real-Time Platform Statistics"]})}),e.jsx(E,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-lg border border-green-200 dark:border-green-800",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600 mb-1",children:"99.8%"}),e.jsx("div",{className:"text-sm text-green-700 dark:text-green-300 font-medium",children:"Success Rate"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-1",children:"0.3%"}),e.jsx("div",{className:"text-sm text-blue-700 dark:text-blue-300 font-medium",children:"Trading Fee"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-lg border border-purple-200 dark:border-purple-800",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-1",children:"47"}),e.jsx("div",{className:"text-sm text-purple-700 dark:text-purple-300 font-medium",children:"24h Trades"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 rounded-lg border border-orange-200 dark:border-orange-800",children:[e.jsx("div",{className:"text-3xl font-bold text-orange-600 mb-1",children:"~8s"}),e.jsx("div",{className:"text-sm text-orange-700 dark:text-orange-300 font-medium",children:"Avg Speed"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(F,{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm",children:[e.jsx(M,{children:e.jsx(V,{className:"text-lg",children:"Network Health"})}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Uptime"}),e.jsx("span",{className:"font-semibold text-green-600",children:"99.2%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Active Nodes"}),e.jsx("span",{className:"font-semibold",children:"12"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Network Load"}),e.jsx(A,{variant:"outline",className:"text-green-600 border-green-200",children:"Low"})]})]})]}),e.jsxs(F,{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm",children:[e.jsx(M,{children:e.jsx(V,{className:"text-lg",children:"Security Metrics"})}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Smart Contracts"}),e.jsx(A,{variant:"outline",className:"text-yellow-600 border-yellow-200",children:"In Progress"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Bug Bounty"}),e.jsx("span",{className:"font-semibold",children:"$5K"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Insurance Fund"}),e.jsx("span",{className:"font-semibold",children:"$25K"})]})]})]})]})]})]})})]})]})})}export{Hs as default};
